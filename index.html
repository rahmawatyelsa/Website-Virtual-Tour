<!DOCTYPE html>
<html lang="en">
	<head>
		<!--projecttitle--><title>Virtual Tour Museum Siginjai</title><!--projecttitle-end-->
		<!--projectdescription--><meta name="description" content="New 3Sixty Virtual Tour Project"><!--projectdescription-end-->
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, shrink-to-fit=no">
		
		<link rel="stylesheet" type="text/css" href="css/font-awesome.css">
		<link rel="stylesheet" type="text/css" href="style.css">
		
		<!-- Insert this line above script imports  -->
		<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
		
		<script src="js/jquery.js"></script>
		<script src="js/imagedata.js"></script>
		
		<!-- Insert this line after script imports -->
		<script>if (window.module) module = window.module;</script>
		
		<style>
		
			
						
			/* SCROLLBAR STYLING */
			/* width */
			::-webkit-scrollbar {
				width: 0.25em;
				height: 0.25em;
			}
			/* Track */
			::-webkit-scrollbar-track {
				background: #2c3643; 
			}
			/* Handle */
			::-webkit-scrollbar-thumb {
				background: #0d9e59; 
				transition: background .5s;
			}
			/* Handle on hover */
			::-webkit-scrollbar-thumb:hover {
				background: #00e075; 
			}


			body {
				margin: 0;
				overflow: hidden;
			}
			#container {
				width: 100vw;
				height: 100vh;
				display: block;
			}
			#overlay {
				position: absolute;
				top: 0; left: 0;
				width: 100vw;
				height: 100vh;
				background-color: rgba(0, 0, 0, 0.8);
				color: white;
				font-size: 2rem;
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 10;
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.5s ease;
			}
			
			#tmp{
				position: fixed;
				top: 0;
				left: 0; 
				right: 0;
				bottom: 0;
				padding: 3em;
				background-color: rgba(0,0,0,.5);
				backdrop-filter: blur(5px);
				display: none;
				z-index: 21;
			}
		</style>
	</head>
	<body id="body">
	    <div id="container"></div>
		<div id="overlay">Loading...</div>
    	
		
		
		<!--customhtml--><!--customhtml-end-->
		
		<div id="tmp">
			<div style="width: 100%; height: 100%; overflow: hidden; overflow-y: auto; box-sizing: border-box; position: relative;" id="tmpcontent"></div>
			<div class="mediaclosebutton" onclick="hideTemp()"><i class="fa fa-times-circle"></i></div>
		</div>


		<div id="loading" class="fullwrapper" style="display: table; width: 100%; height: 100%;">
    		<div style="display: table-cell; vertical-align: middle; text-align: center; color: white; font-size: 30px; padding: 50px;">
    			<!--loadingtext-->Loading...<!--loadingtext-end-->
				<div id="loadingperc" style="font-size:12px;"></div>
    		</div>
    	</div>
		
		<!-- Three.js Core -->
		<script src="js/three.min.js"></script>
		<!-- OrbitControls -->
		<script src="js/OrbitControls.js"></script>
		
    	<script>
			
			let scene, camera, renderer, controls;
			let spriteHotspots = [];
			
			let panoramaMesh;

			let targetFov = 75;
			let initialFov = 75;
			let initialPinchDistance = null;

			const overlay = document.getElementById('overlay');
			const raycaster = new THREE.Raycaster();
			const mouse = new THREE.Vector2();

			init();
			animate();
			
			/*initfunction*/

		let currentPanorama = 'Pano1.jpg';
		function init() {
			const container = document.getElementById('container');

			scene = new THREE.Scene();

			camera = new THREE.PerspectiveCamera(targetFov, container.clientWidth / container.clientHeight, 0.1, 1000);
			camera.position.set(0, 0, 0.1);

			renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setSize(container.clientWidth, container.clientHeight);
			container.appendChild(renderer.domElement);

			controls = new THREE.OrbitControls(camera, renderer.domElement);
			controls.enableZoom = true;
			controls.minDistance = 0.1;
			controls.maxDistance = 5;
			controls.enablePan = false;
			controls.rotateSpeed = -0.3;
			controls.enableDamping = true;
			controls.dampingFactor = 0.1;

			const geometry = new THREE.SphereGeometry(500, 60, 40);
			geometry.scale(-1, 1, 1);

			const texture = new THREE.TextureLoader().load('panoramas/Pano1.jpg');
			const material = new THREE.MeshBasicMaterial({ map: texture });

			panoramaMesh = new THREE.Mesh(geometry, material);
			scene.add(panoramaMesh);

			loadHotspotsFor('Pano1.jpg');

			window.addEventListener('resize', onWindowResize);
			renderer.domElement.addEventListener('wheel', onMouseWheel, { passive: false });
			renderer.domElement.addEventListener('touchstart', handleTouchStart, { passive: false });
			renderer.domElement.addEventListener('touchmove', handleTouchMove, { passive: false });
			renderer.domElement.addEventListener('pointermove', onPointerMove, false);
		}
		
/*initfunction-end*/

			function onMouseWheel(e) {
				e.preventDefault();
				targetFov += e.deltaY * 0.05;
				targetFov = THREE.MathUtils.clamp(targetFov, 30, 100);
			}

			function handleTouchStart(e) {
				if (e.touches.length === 2) {
					const dx = e.touches[0].pageX - e.touches[1].pageX;
					const dy = e.touches[0].pageY - e.touches[1].pageY;
					initialPinchDistance = Math.sqrt(dx * dx + dy * dy);
					initialFov = targetFov;
				}
			}

			function handleTouchMove(e) {
				if (e.touches.length === 2 && initialPinchDistance !== null) {
					e.preventDefault();
					const dx = e.touches[0].pageX - e.touches[1].pageX;
					const dy = e.touches[0].pageY - e.touches[1].pageY;
					const newDistance = Math.sqrt(dx * dx + dy * dy);
					const zoomFactor = initialPinchDistance / newDistance;
					targetFov = THREE.MathUtils.clamp(initialFov * zoomFactor, 30, 100);
				}
			}

			function loadHotspotsFor(panorama) {
				clearHotspots();
				/*panoramas*/

			if (panorama === 'Pano1.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-399.3886298221785, -6.809079240732894, -4.545838055204073), () => {
		switchPanorama('Pano2.jpg');
	});
	addHotspot('images/lokasi1.jpg', new THREE.Vector3(-345.8572322909879, -156.6858982318506, -123.77067281354626), () => {
		window.open('https://maps.app.goo.gl/fp4yV7uhsZXA61BW6', '_blank');
	});
}

			if (panorama === 'Pano2.jpg') {
				addHotspot('images/chevronup.png', new THREE.Vector3(-383.06820878033875, -26.196107887514348, 109.118130549017), () => {
		switchPanorama('Pano1.jpg');
	});
	addHotspot('images/chevronleft.png', new THREE.Vector3(-78.57092143688399, -69.7251711556301, 385.47209662933574), () => {
		switchPanorama('Pano4.jpg');
		switchPanorama('Pano4.jpg');
	});
	addHotspot('images/chevronup.png', new THREE.Vector3(-273.4413800370981, -93.23354019768885, 275.71372450902857), () => {
		switchPanorama('Pano5.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-322.21358154653956, -14.35970110470969, -235.79023643879265), () => {
		showMedia(1, 'images/uangLogam.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-275.7675787572639, -6.829149945639811, -288.5317723941447), () => {
		showMedia(1, 'images/uangkertas.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-236.6232034066225, -72.39963686322032, -313.3562375807009), () => {
		switchPanorama('ruang.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-371.1935741994965, -145.10269434977891, 21.147501560019204), () => {
		showMedia(1, 'images/ProvinsiJambi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-317.00349783015633, -168.77136815001984, -174.46257929566536), () => {
		showMedia(1, 'images/Legenda.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(380.0128466337816, -70.14302821868989, 99.58263001455971), () => {
		showMedia(1, 'images/TandaPeresmian.jpg');
	});
}

			if (panorama === 'Pano4.jpg') {
				addHotspot('images/default.png', new THREE.Vector3(173.01684682683063, -30.31837269161753, -358.6860113637011), () => {
		showMedia(1, 'images/PotensiAlamJambi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-241.03263355787337, -71.61114475270149, -309.94266401814025), () => {
		showMedia(1, 'images/fosilkayu.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-203.54587133867915, -62.131043123978884, -338.2088628456463), () => {
		showMedia(1, 'images/batuan1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-166.64835370791795, -53.79667728920653, -358.90018924048394), () => {
		showMedia(1, 'images/batuan2.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-363.80112935600056, -31.26685370024169, -163.1339167178699), () => {
		showMedia(1, 'images/HarimauSumatera1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(396.3732046875723, -40.2186941940807, -21.915801817433234), () => {
		showMedia(1, 'images/harimausumatera2.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(389.69284116714607, -23.061757280390175, 85.1724514880455), () => {
		showMedia(1, 'images/SuakaMargawatsa.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(90.82194964639174, -33.74142928819291, 387.53132195039666), () => {
		showMedia(1, 'images/hewan1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-91.46421207172638, -41.46895491605254, 386.35907139259325), () => {
		showMedia(1, 'images/Hewan2.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(337.8433648212891, -81.67373421529227, -197.02102069927196), () => {
		switchPanorama('Pano2.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(104.06918286291656, -148.32342815857874, 355.8389888006318), () => {
		switchPanorama('pano9(1).jpg');
	});
}

			if (panorama === 'Pano5.jpg') {
				addHotspot('images/default.png', new THREE.Vector3(387.72462975178456, -65.41478057018506, 69.52849384999186), () => {
		showMedia(1, 'images/KERAMIK.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-365.26331173411677, -160.66346045503016, -11.736055329629904), () => {
		switchPanorama('Pano7.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-291.3918372240133, -1.442819125239205, 273.2978963940799), () => {
		showMedia(1, 'images/TemuanBawahAir.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(157.44650950960312, -262.6067523300182, 256.66520195924375), () => {
		showMedia(1, 'images/tempayan.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-63.39339744747628, -17.10480056280242, 393.49540015012417), () => {
		showMedia(1, 'images/TemuanArkeologi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(367.86256717610183, -31.70135719349261, 152.49229237386788), () => {
		showMedia(1, 'images/TemuanPermukaan.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(342.0353891506862, -43.50115978276141, 201.63144233801302), () => {
		showMedia(1, 'images/Piring.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-204.75865688033298, -20.86545990858841, 342.17896936427843), () => {
		showMedia(1, 'images/GUCI.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(378.75104430376064, -114.27308652028361, -52.79967334066676), () => {
		switchPanorama('Pano2.jpg');
	});
}

			if (panorama === 'Pano7.jpg') {
				addHotspot('images/chevronleft.png', new THREE.Vector3(-347.7271394758627, -33.631093086787814, 193.92506350979139), () => {
		switchPanorama('Pano5.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-396.33368441839866, -44.59717379975926, -12.909072135866284), () => {
		showMedia(1, 'images/KisahSultan1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-391.1554250318336, -53.339274026412234, -58.109013019513824), () => {
		showMedia(1, 'images/Kisah2.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-384.0081472135094, -50.25922975981944, -96.08972692936487), () => {
		showMedia(1, 'images/kisah3.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-375.45726764080086, -48.6210678627007, -127.05135121940006), () => {
		showMedia(1, 'images/kisah4.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-363.4690617194566, -49.77178733333245, -157.943694063414), () => {
		showMedia(1, 'images/kisah5.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-350.06804877934474, -48.18209858270254, -185.2924784765127), () => {
		showMedia(1, 'images/kisah6.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-364.16837094880873, -152.12598146798132, -61.23412193733369), () => {
		showMedia(1, 'images/Jangkar.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(397.21422282792116, -26.85480725421889, 30.218086174890317), () => {
		showMedia(1, 'images/Transportasi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-170.2786844974594, -36.30942537078183, -359.3648768689651), () => {
		showMedia(1, 'images/PatungBuddha.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-35.60758354999997, -46.73495340937502, -394.9400913663468), () => {
		showMedia(1, 'images/Arca.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(124.01524761248879, -47.14278248282967, -376.8484287249098), () => {
		showMedia(1, 'images/MesinCetakUang.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-311.76522030476366, -9.358851264640561, 248.8374144140456), () => {
		showMedia(1, 'images/PerahuJalur.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-370.5062519732601, -29.632736701846454, 145.7797175085458), () => {
		showMedia(1, 'images/BatuLapik.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-391.44608503303755, -31.476364280076897, 73.41609357256999), () => {
		showMedia(1, 'images/Stupa.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(294.7029965914723, -43.1099575493089, -266.38869695613954), () => {
		showMedia(1, 'images/KerajinanPandaiBesi.jpg');
	});
}

			if (panorama === 'pano9(1).jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-63.8325852799892, -95.98690555259935, -382.24444358103005), () => {
		switchPanorama('lantai2.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(144.0287449666962, -372.7010804707737, 5.25588041536051), () => {
		switchPanorama('Pano4.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-384.4767124643561, -44.20531471783954, -97.08697579253145), () => {
		showMedia(1, 'images/Beliung.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-346.29995780967215, -56.40155968798466, -190.69671963115835), () => {
		showMedia(1, 'images/wadahcepuk.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-318.95418950141755, -51.66998534100186, -234.93046973306826), () => {
		showMedia(1, 'images/FRAGMEN.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-289.2362713430461, -56.03317077350902, -269.6341986439762), () => {
		showMedia(1, 'images/Gramofon.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-216.49204942020992, -43.07367765280995, -332.33514812501153), () => {
		showMedia(1, 'images/Batik.jpg');
	});
}

			if (panorama === 'ruang.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-55.55935526126585, -175.8480558976248, -354.0524832782771), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(209.70122311985807, -316.1179693274181, -125.31254256883616), () => {
		switchPanorama('Pano2.jpg');
	});
}

			if (panorama === 'lantai2.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(218.2757569369486, -182.56322022072135, 280.36927115198046), () => {
		switchPanorama('lantai3.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(241.63988476519378, -310.2176306789207, -70.18449881013014), () => {
		switchPanorama('pano9(1).jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-370.3499725447639, -1.4901997652746266, -149.30127772145786), () => {
		showMedia(1, 'images/MasaKlasikJambi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-382.33884752279783, -31.502184228520107, 111.19618851707286), () => {
		showMedia(1, 'images/KawasanPercandian.jpg');
	});
}

			if (panorama === '1.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-41.374092835753416, -136.1286881646446, 373.3050146144049), () => {
		switchPanorama('2.jpg');
	});
	addHotspot('images/arrowright.png', new THREE.Vector3(307.8133369401995, -202.8900653446999, 153.2373470684903), () => {
		switchPanorama('ruang.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(397.39948663623943, 16.644169754438327, 34.11701660960698), () => {
		showMedia(1, 'images/Pengantar.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(36.69664283188148, -21.928481692221887, -397.0924794412567), () => {
		showMedia(1, 'images/uangkertas1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(209.51679361937903, -16.44018636064473, -339.2364913321902), () => {
		showMedia(1, 'images/uanglogam1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-215.69749543043514, -31.298762448821932, -334.5892016188353), () => {
		showMedia(1, 'images/tombak.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-398.6613383921281, -13.088029497241473, -12.140280791973993), () => {
		showMedia(1, 'images/arab.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-315.36445439521776, -109.886242845577, 218.69914546776764), () => {
		showMedia(1, 'images/Parang.jpg');
	});
}

			if (panorama === '2.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-33.80886306487189, -158.23245657264712, 365.29772655147076), () => {
		switchPanorama('ruang.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(322.02346561301647, -234.9016440983701, 32.568960983481915), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-394.3825618793836, -12.126305741178868, -59.08148935720079), () => {
		showMedia(1, 'images/tandukkerbau.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(27.996854010612026, 2.1841723982892236, -398.3055976698252), () => {
		showMedia(1, 'images/KepalaPending.jpg');
	});
}

			if (panorama === 'Lamtai3(3).jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-195.26341144133718, -156.88731717316693, -310.95038274750345), () => {
		switchPanorama('lantai3(2).jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(277.78045548976166, -13.2859918516049, -286.1077478251183), () => {
		showMedia(1, 'images/menyulam.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(51.063192300055974, 3.6928107750401677, -396.06772564385335), () => {
		showMedia(1, 'images/tampukkasur.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-306.10867671395954, -18.053403298411343, 255.27628017095324), () => {
		showMedia(1, 'images/Tangkul.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-140.5314158696997, -48.682315785703906, 370.18987574870874), () => {
		showMedia(1, 'images/Serikap.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(37.62248729953881, -69.62836215658014, 391.6024408243122), () => {
		showMedia(1, 'images/PeralatanMenangkapIkan.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(280.0083039570508, -35.10376584850415, 282.29999329246516), () => {
		showMedia(1, 'images/OrangRimba.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(351.97581469238327, 2.1411307874327763, 188.5936436365281), () => {
		showMedia(1, 'images/BudayaOrangRimba.jpg');
	});
}

			if (panorama === 'lantai3(2).jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-377.39383413528947, -119.8139677898024, -51.64277286445424), () => {
		switchPanorama('Pano3.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(363.00226379846674, -166.05445582462983, 7.6441112821428145), () => {
		switchPanorama('Lamtai3(3).jpg');
	});
}

			if (panorama === 'lantai3.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-54.18723430552488, -145.00170082837073, 367.8853017854361), () => {
		switchPanorama('Lamtai3(3).jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(356.2789278409631, -179.7561959395686, 15.91772144481136), () => {
		switchPanorama('lantai2.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(385.1448269153923, -47.9432436288742, 92.95891238331683), () => {
		showMedia(1, 'images/BudayaMasyarakatJambi.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-391.97943983877303, -23.391361474644874, 71.68268466362875), () => {
		showMedia(1, 'images/Nganginan.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(395.61992175632037, -45.64838948050968, -23.817101093814337), () => {
		showMedia(1, 'images/jeratrusa.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-339.45509197457045, 4.235746924057802, 210.13009571157804), () => {
		showMedia(1, 'images/Menganyam.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-394.58846734851926, -51.575292296746966, -30.802504709718434), () => {
		showMedia(1, 'images/LesungInjit.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-336.5738520142867, -54.09417399187987, -207.6446873420602), () => {
		showMedia(1, 'images/Kisarab.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-268.17579993275507, -11.448914904852408, 295.975669579591), () => {
		showMedia(1, 'images/TikarShalat.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(159.91780809434695, -20.095417488725275, -365.529568045651), () => {
		showMedia(1, 'images/Pertanian.jpg');
	});
}

			if (panorama === 'Pano3.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-82.2858543617083, -137.02131437558782, -366.0005379289233), () => {
		switchPanorama('lantai3(2).jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-9.870229594157932, -26.16949596957557, 398.31309972240354), () => {
		showMedia(1, 'images/PermainanTradisional.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-398.1939778967311, 2.448813837695685, 30.09102155070753), () => {
		showMedia(1, 'images/PakaianPengantin.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(98.4341902513008, -59.15948708830769, -382.32812617253256), () => {
		showMedia(1, 'images/pelaminanretro.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(238.23192819592816, -32.16474112992772, 319.2938374458363), () => {
		showMedia(1, 'images/Membatik.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(331.9849447704438, -62.540136554594184, 212.94615699989043), () => {
		showMedia(1, 'images/Menenun.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(374.3081435310034, -123.48514143375368, -64.6616015028886), () => {
		switchPanorama('Pano2.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(385.95684353643264, -95.76602730297849, 41.55899093010031), () => {
		showMedia(1, 'images/Tawing.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-203.6829414887001, -21.23720491185301, 342.876296276234), () => {
		showMedia(1, 'images/alatmusiktradisional.jpg');
	});
	addHotspot('images/default.png', new THREE.Vector3(-143.20440624407112, -44.87937576664469, 369.64518131906414), () => {
		showMedia(1, 'images/Biola.jpg');
	});
}

/*panoramas-end*/
				
			}

			function switchPanorama(panoramaName) {
				overlay.style.pointerEvents = 'auto';
				overlay.style.opacity = '1';
				overlay.textContent = 'Loading...';

				const newTexture = new THREE.TextureLoader().load(`panoramas/${panoramaName}`, (tex) => {
					panoramaMesh.material.map = tex;
					panoramaMesh.material.needsUpdate = true;
					currentPanorama = panoramaName;
					loadHotspotsFor(currentPanorama);
					overlay.style.opacity = '0';
					overlay.style.pointerEvents = 'none';
				}, (xhr) => {
					const progress = (xhr.loaded / xhr.total) * 100;
					overlay.textContent = `Loading... ${progress.toFixed(0)}%`;
				});
			}

			function addHotspot(imageUrl, position, onClickCallback) {
				const textureLoader = new THREE.TextureLoader();
				textureLoader.load(imageUrl, (texture) => {
					const material = new THREE.SpriteMaterial({ map: texture });
					const sprite = new THREE.Sprite(material);
					sprite.position.copy(position);
					sprite.scale.set(40, 40, 1);
					sprite.userData = {
						onClick: onClickCallback,
						targetScale: 40
					};
					spriteHotspots.push(sprite);
					scene.add(sprite);
				});
			}

			function clearHotspots() {
				spriteHotspots.forEach(sprite => scene.remove(sprite));
				spriteHotspots = [];
			}

			function onPointerMove(event) {
				mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
				mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

				raycaster.setFromCamera(mouse, camera);
				const intersects = raycaster.intersectObjects(spriteHotspots);

				spriteHotspots.forEach(sprite => {
					sprite.userData.targetScale = 40;
				});

				if (intersects.length > 0) {
					intersects[0].object.userData.targetScale = 50;
				}
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}

			function animate() {
				requestAnimationFrame(animate);

				// Smooth transition FOV
				camera.fov += (targetFov - camera.fov) * 0.1;
				camera.updateProjectionMatrix();

				// Smooth hotspot scale animation
				spriteHotspots.forEach(sprite => {
					const currentScale = sprite.scale.x;
					const target = sprite.userData.targetScale || 40;
					const newScale = THREE.MathUtils.lerp(currentScale, target, 0.1);
					sprite.scale.set(newScale, newScale, 1);
				});

				controls.update();
				renderer.render(scene, camera);
			}

			// Klik pada hotspot
			document.addEventListener('click', function (event) {
				const mouseClick = new THREE.Vector2(
					(event.clientX / window.innerWidth) * 2 - 1,
					-(event.clientY / window.innerHeight) * 2 + 1
				);

				const clickRaycaster = new THREE.Raycaster();
				clickRaycaster.setFromCamera(mouseClick, camera);
				const intersects = clickRaycaster.intersectObjects(spriteHotspots);

				if (intersects.length > 0) {
					const clicked = intersects[0].object;
					if (clicked.userData.onClick) clicked.userData.onClick();
				}
			});
			
			
			
            
			
			
			function hideTemp(){
				$("#tmp").fadeOut();
				setTimeout(function(){
					$("#tmpcontent").html("");
				},1000);
			}
			
			function showMedia(type, content){
				switch(type){
					case 1 :
						//Image
						$("#tmpcontent").html("<img src='"+content+"' style='width: 100%;'>");
						$("#tmp").fadeIn();
						break;
					case 2 :
						//Video
						$("#tmpcontent").html("<video id='webvideo' controls autoplay style='width: 100%; height: 100%;'><source src='" +content+ "' type='video/mp4'> Your browser does not support the video tag. </video>");
						$("#tmp").fadeIn();
						break;
					case 3 :
						//Audio
						$("#tmpcontent").html("<audio controls style='width: 100%;'><source src='"+content+"' type='audio/ogg'>Your browser does not support the audio tag.</audio>");
						$("#tmp").fadeIn();
						break;
					case 4 :
						//PDF
						$("#tmpcontent").html("<iframe src='pdfjs/web/viewer.html?file=../../"+content+"' style='width: 100%; height: 99%;'></iframe>");
						$("#tmp").fadeIn();
						break;
				}
			}
			
			
			/*customjs*/

/*customjs-end*/
        </script>
	</body>
</html>